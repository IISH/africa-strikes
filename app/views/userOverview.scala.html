@(
    message: String,
    users: Array[User],
    userForm: Form[User],
    rights: List[String]
)

@import helper._
@main("Africa Strikes"){
  <script src="@routes.Assets.versioned("javascripts/jquery-3.1.1.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/bootstrap.js")" type="text/javascript"></script>
  @form(action = routes.UserOverviewController.update(), 'enctype -> "multipart/form-data") {
    @CSRF.formField
    <div class="container">
      <div class="col-lg-10">
        <h2>Overview of the users.</h2>
      </div>
      <div class="col-lg-2">
        <div class="form-group">
          <h2><button name="userOverviewButton" id="defaultPageButton" value="admin" class="form-control btn-primary">Admin page</button></h2>
          <h2><button name="userOverviewButton" id="logoutButton" value="logout" class="form-control btn-danger">Log out</button></h2>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="container col-lg-3">
        <label>Search for a specific user</label>
        <div class="form-group">
          <input class="input-full-width form-control" id="searchUserAdmin"/>
        </div>
        <div class="form-group">
          <label>Select a user from the list</label>
          <button type="button" name="userOverviewButton" id="refreshListButton" value="refresh" class="form-control btn-info">Refresh</button>
        </div>
        <div class="form-inline">
          <select class="input-full-width form-control form-control-full-height" id="userSelectAdmin" size="20"></select>
        </div>
      </div>
      <div class="container col-lg-9">
        This will show the user with the rights etc.
        <div class="form-inline">
          @inputText(userForm("id"), '_label -> "ID", 'readonly -> "readonly", 'class -> "input-full-width form-control")
        </div>
        <div class="form-inline">
          @inputText(userForm("username"), '_label -> "Username", 'readonly -> "readonly", 'class -> "input-full-width form-control")
        </div>
        <div class="form-inline">
          @inputText(userForm("fullName"), '_label -> "Full name", 'readonly -> "readonly", 'class -> "input-full-width form-control")
        </div>
        <div class="form-inline">
          @select(userForm("rights"), rights.map(s => s -> s), '_label -> "Rights", 'class -> "form-control input-full-width", 'placeholder -> "Please choose...", 'title -> "Select a right for the user from the dropdown list")
        </div>
        <button name="userOverviewButton" id="updateUserButton" value="update" class="form-control btn-success">Save user</button>
      </div>
    </div>
  }

  <script type="text/javascript">
    $(document).ready(function () {

      function appendToSelect(inner, value, selector) {
        var el = document.createElement('option');
        el.innerHTML = inner;
        el.value = value;
        selector.appendChild(el);
      }

      $(function () {
        @for(u <- users){
          appendToSelect("@u.getUsername", "@u.getId", document.getElementById("userSelectAdmin"));
        }
      });

      $('#userSelectAdmin').change(function () {
        var selectedUser = $('#userSelectAdmin').val().toString();
        console.log(selectedUser);

        $.getJSON('/admin/user-overview/user/' + selectedUser, function(user){

          for (var key in user) {
            if (user.hasOwnProperty(key)) {
              $('[id=' + key + ']').val(user[key]);
            }
          }

        });
      });

    });
  </script>
}